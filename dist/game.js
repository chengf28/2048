!function(g){var I={};function C(A){if(I[A])return I[A].exports;var r=I[A]={i:A,l:!1,exports:{}};return g[A].call(r.exports,r,r.exports,C),r.l=!0,r.exports}C.m=g,C.c=I,C.d=function(g,I,A){C.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:A})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,I){if(1&I&&(g=C(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var A=Object.create(null);if(C.r(A),Object.defineProperty(A,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var r in g)C.d(A,r,function(I){return g[I]}.bind(null,r));return A},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="",C(C.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/gameController.js\nclass gameController\r\n{\r\n    /**\r\n     * 构造函数\r\n     * @param {int} num 大小\r\n     */\r\n    constructor(num)\r\n    {\r\n        this.num    = num;\r\n        this.border = this.init(num);\r\n        // this.border = border;\r\n        // this.width  = width;\r\n    }\r\n    /**\r\n     * 初始化数据矩阵(二维数组)\r\n     * @param {int} num 初始化\r\n     */\r\n    init(num)\r\n    {\r\n        let border = [];\r\n        for (let i = 0; i < num; i++)\r\n        {\r\n            border[i]  = [];\r\n            for(let j = 0 ; j <num ; j++)\r\n            {\r\n                border[i][j]  = 0;\r\n            }\r\n        }\r\n        return border;\r\n    }\r\n\r\n    /**\r\n     * 随机生成times个数字\r\n     * @param inst times 生成个数\r\n     */\r\n    createNum(times)\r\n    {\r\n        // 检查是否还有空余的格子\r\n        for (let i = 0; i < times; i++) \r\n        {\r\n            if (!this.checkSpace()) \r\n            {\r\n                // let randY = 0;\r\n                while (true) {\r\n                    // 随机x位置\r\n                    let randX = parseInt(Math.floor(Math.random() * this.num));\r\n                    // let randX = 0;\r\n                    // 随机y位置\r\n                    let randY = parseInt(Math.floor(Math.random() * this.num));\r\n                    // 设置随机值\r\n                    if (this.border[randX][randY] == 0) {\r\n                        this.border[randX][randY] = Math.random() < .5 ? 2 : 4;\r\n                        break;\r\n                    }\r\n                    // randY = 2;\r\n                }\r\n            } else {\r\n                alert(\"game over\");\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 检查是否还有空余空间\r\n     */\r\n    checkSpace()\r\n    {\r\n        return this.border.every(function (iarr, i) {\r\n            return iarr.every(function (num, j) {\r\n                if (num == 0) {\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    \r\n    Down()\r\n    {\r\n        let Matrix = this.border;\r\n        for (let i = 0; i < Matrix.length; i++) {\r\n            // 从上向下遍历(排除第一位)\r\n            for (let j = Matrix[i].length - 1; j >= 0; j--) {\r\n                for (let k = j - 1; k >= 0; k--) {\r\n                    if (Matrix[i][k] == 0) {\r\n                        continue;\r\n                    }\r\n                    if (Matrix[i][k] != Matrix[i][j]) {\r\n                        if (Matrix[i][j] == 0) {\r\n                            for (let n = k - 1; n >= -1; n--) {\r\n                                // 到达边界\r\n                                if (!Matrix[i].hasOwnProperty(n)) {\r\n                                    Matrix[i][j] = Matrix[i][k];\r\n                                    Matrix[i][k] = 0;\r\n                                    break;\r\n                                }\r\n                                if (Matrix[i][n] == 0) {\r\n                                    continue;\r\n                                }\r\n                                if (Matrix[i][n] == Matrix[i][k]) {\r\n                                    Matrix[i][j] = Matrix[i][n] * 2;\r\n                                    Matrix[i][k] = 0;\r\n                                    Matrix[i][n] = 0;\r\n                                    break;\r\n                                }\r\n                                if (Matrix[i].hasOwnProperty(n) && Matrix[i][n] != Matrix[i][k] && Matrix[i][j] == 0) {\r\n                                    Matrix[i][j] = Matrix[i][k];\r\n                                    Matrix[i][k] = 0;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        break;\r\n                    }\r\n                    if (Matrix[i][k] == Matrix[i][j]) {\r\n                        Matrix[i][j] += Matrix[i][k];\r\n                        Matrix[i][k] = 0;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.border = Matrix;\r\n    }\r\n\r\n\r\n    Up()\r\n    {\r\n        let Matrix = this.border;\r\n        for (let i = 0; i < Matrix.length; i++) \r\n        {\r\n            // 从上向下遍历\r\n            for (let j = 0; j < Matrix[i].length; j++) {\r\n                for (let k = j + 1; k < Matrix[i].length; k++) {\r\n\r\n                    if (Matrix[i][k] == 0) {\r\n                        continue;\r\n                    }\r\n                    if (Matrix[i][k] != Matrix[i][j]) {\r\n\r\n                        if (Matrix[i][j] == 0) {\r\n                            for (let n = k + 1; n <= Matrix[i].length; n++) {\r\n                                // 到达边界\r\n                                if (!Matrix[i].hasOwnProperty(n)) {\r\n                                    Matrix[i][j] = Matrix[i][k];\r\n                                    Matrix[i][k] = 0;\r\n                                    break;\r\n                                }\r\n                                if (Matrix[i][n] == 0) {\r\n                                    continue;\r\n                                }\r\n                                if (Matrix[i][n] == Matrix[i][k]) {\r\n                                    Matrix[i][j] = Matrix[i][n] * 2;\r\n                                    Matrix[i][k] = 0;\r\n                                    Matrix[i][n] = 0;\r\n                                    break;\r\n                                }\r\n                                if (Matrix[i].hasOwnProperty(n) && Matrix[i][n] != Matrix[i][k]) {\r\n                                    Matrix[i][j] = Matrix[i][k];\r\n                                    Matrix[i][k] = 0;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    if (Matrix[i][j] == Matrix[i][k]) {\r\n                        Matrix[i][j] += Matrix[i][k];\r\n                        Matrix[i][k] = 0;\r\n                        break;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        this.border = Matrix;\r\n    }\r\n\r\n    Left()\r\n    {\r\n        let Matrix = this.border;\r\n        for (let i = 0; i < Matrix.length; i++) {\r\n            // 从上向下遍历\r\n            for (let j = 0; j < Matrix[i].length; j++) {\r\n                for (let k = i + 1; k < Matrix.length; k++) {\r\n                    if (Matrix[k][j] == 0) {\r\n                        continue;\r\n                    }\r\n                    if (Matrix[k][j] != Matrix[i][j]) {\r\n                        if (Matrix[i][j] == 0) {\r\n                            for (let n = k + 1; n <= Matrix.length; n++) {\r\n                                // 到达边界\r\n                                if (!Matrix.hasOwnProperty(n)) {\r\n                                    Matrix[i][j] = Matrix[k][j];\r\n                                    Matrix[k][j] = 0;\r\n                                    break;\r\n                                }\r\n                                if (Matrix[n][i] == 0) {\r\n                                    continue;\r\n                                }\r\n                                if (Matrix[n][j] == Matrix[k][j]) {\r\n                                    Matrix[i][j] = Matrix[n][j] * 2;\r\n                                    Matrix[k][j] = 0;\r\n                                    Matrix[n][j] = 0;\r\n                                    break;\r\n                                }\r\n                                if (Matrix.hasOwnProperty(n) && Matrix[n][j] != Matrix[k][j]) {\r\n                                    Matrix[i][j] = Matrix[k][j];\r\n                                    Matrix[k][j] = 0;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    if (Matrix[i][j] == Matrix[k][j]) {\r\n                        Matrix[i][j] += Matrix[k][j];\r\n                        Matrix[k][j] = 0;\r\n                        break;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        this.border = Matrix;\r\n    }\r\n\r\n    Right()\r\n    {\r\n        let Matrix = this.border;\r\n        for (let i = Matrix.length - 1; i >= 0; i--) {\r\n            // 从上向下遍历\r\n            for (let j = 0; j < Matrix[i].length; j++) {\r\n                for (let k = i - 1; k >= 0; k--) {\r\n                    if (Matrix[k][j] == 0) {\r\n                        continue;\r\n                    }\r\n                    if (Matrix[k][j] != Matrix[i][j]) {\r\n                        if (Matrix[i][j] == 0) {\r\n                            for (let n = k - 1; n >= -1; n--) {\r\n                                // 到达边界\r\n                                if (!Matrix.hasOwnProperty(n)) {\r\n                                    Matrix[i][j] = Matrix[k][j];\r\n                                    Matrix[k][j] = 0;\r\n                                    break;\r\n                                }\r\n                                if (Matrix[n][i] == 0) {\r\n                                    continue;\r\n                                }\r\n                                if (Matrix[n][j] == Matrix[k][j]) {\r\n                                    Matrix[i][j] = Matrix[n][j] * 2;\r\n                                    Matrix[k][j] = 0;\r\n                                    Matrix[n][j] = 0;\r\n                                    break;\r\n                                }\r\n                                if (Matrix.hasOwnProperty(n) && Matrix[n][j] != Matrix[k][j]) {\r\n                                    Matrix[i][j] = Matrix[k][j];\r\n                                    Matrix[k][j] = 0;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    if (Matrix[i][j] == Matrix[k][j]) {\r\n                        Matrix[i][j] += Matrix[k][j];\r\n                        Matrix[k][j] = 0;\r\n                        break;\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n        this.border = Matrix;\r\n    }\r\n\r\n    Win()\r\n    {\r\n        Array.prototype.max = function () \r\n        {\r\n            return Math.max.apply({}, this)\r\n        } \r\n        \r\n        let max = 0;\r\n        this.border.forEach(function (arr, i) {\r\n            if (arr.max() > max) \r\n            {\r\n                max = arr.max();\r\n            }\r\n        });\r\n        if (max >= 2048) \r\n        {\r\n            alert('you wind');\r\n            return;\r\n        }\r\n    }\r\n}\r\n/* harmony default export */ var src_gameController = (gameController);\n// CONCATENATED MODULE: ./src/viewController.js\nclass viewController\r\n{\r\n    constructor(tag,width,num)\r\n    {\r\n        this.context  = tag.getContext('2d');\r\n        this.margin   = 10;\r\n        this.width    = width;\r\n        this.height   = width;\r\n        this.boxWidth = (width - this.margin * (num + 1)) / num;\r\n    }\r\n    \r\n    background(Matrix)\r\n    {\r\n        let positionX = 0;\r\n        let positionY = 0;\r\n        this.context.clearRect(0, 0, this.width, this.width);\r\n        \r\n        for (let i = 0; i < Matrix.length ; i++)\r\n        {\r\n            for (let j = 0; j < Matrix.length; j++) \r\n            {\r\n                positionX = (i + 1) * this.margin + i * this.boxWidth;\r\n                positionY = (j + 1) * this.margin + j * this.boxWidth;\r\n                this.drawBox(positionX, positionY, this.setColor(Matrix[i][j]), Matrix[i][j]);\r\n            }\r\n        }    \r\n    }\r\n\r\n    drawBox(x,y,color=\"#fff\",num)\r\n    {\r\n        let radius = this.boxWidth * 0.07;\r\n        this.context.beginPath();\r\n        this.context.fillStyle = color;\r\n        this.context.moveTo(x, y);\r\n        this.context.arcTo(x + this.boxWidth, y, x + this.boxWidth, y + this.boxWidth, radius);\r\n        this.context.arcTo(x + this.boxWidth, y + this.boxWidth, x, y + this.boxWidth, radius);\r\n        this.context.arcTo(x, y + this.boxWidth, x, y, radius);\r\n        this.context.arcTo(x, y, x + this.boxWidth, y, radius);\r\n        this.context.fill();\r\n        if (num > 0) {\r\n            this.context.fillStyle = \"#fff\";\r\n            this.context.font = \"20px Georgia\";\r\n            this.context.fillText(num, x + this.boxWidth / 2 - 5, y + this.boxWidth / 2 + 5);\r\n        }\r\n        this.context.closePath();\r\n    }\r\n\r\n    setColor(number)\r\n    {\r\n        switch (number) {\r\n            case 2:\r\n                return '#96cccc';\r\n                break;\r\n            case 4:\r\n                return '#60cccc';\r\n                break;\r\n            case 8:\r\n                return '#60fccc';\r\n                break;\r\n            case 16:\r\n                return '#60fc00';\r\n                break;\r\n            case 32:\r\n                return '#fff300';\r\n                break;\r\n            case 64:\r\n                return '#ffab00';\r\n                break;\r\n            case 128:\r\n                return '#ff8100';\r\n                break;\r\n            case 256:\r\n                return '#ff4b00';\r\n                break;\r\n            case 512:\r\n                return '#d51b00';\r\n                break;\r\n            case 1024:\r\n                return '#451b00';\r\n                break;\r\n            case 2048:\r\n                return '#151b00';\r\n                break;\r\n        }\r\n        return \"#fff\";\r\n    }\r\n}\r\n/* harmony default export */ var src_viewController = (viewController);\n// CONCATENATED MODULE: ./src/main.js\n\r\n\r\nlet game = new src_gameController(4);\r\ngame.createNum(2);\r\nlet tag          = document.getElementById('canvas');\r\nlet main_parent       = tag.parentNode;\r\nlet width        = main_parent.clientWidth;\r\nlet height       = main_parent.clientHeight;\r\ntag.width        = width;\r\ntag.height       = height;\r\nlet view  = new src_viewController(tag,width,game.num);\r\nview.background(game.border);\r\n\r\n\r\n    document.onkeydown = function (event) \r\n    {\r\n        var e   = event || window.event || arguments.callee.caller.arguments[0];\r\n        var key = e.keyCode;\r\n        switch (key)\r\n        {\r\n            // 左\r\n            case 37:\r\n                game.Left();\r\n                reDraw();\r\n                break;\r\n            // 上\r\n            case 38:\r\n                game.Up();\r\n                reDraw();\r\n                break;\r\n            // 右\r\n            case 39:\r\n                game.Right();\r\n                reDraw();\r\n                break;\r\n            // 下\r\n            case 40:\r\n                game.Down();\r\n                reDraw();\r\n                break;\r\n        }\r\n    }; \r\n\r\nfunction reDraw()\r\n{\r\n    game.createNum(1);\r\n    view.background(game.border);\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZUNvbnRyb2xsZXIuanM/OWI2YyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlld0NvbnRyb2xsZXIuanM/YjkwOSIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcz81NmQ3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxJQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxJQUFJO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQTtBQUNBLDJCQUEyQixTQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixXQUFXO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQkFBbUI7QUFDMUM7QUFDQSw4Q0FBOEMsUUFBUTtBQUN0RCxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFNBQVM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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IjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIGdhbWVDb250cm9sbGVyXHJcbntcclxuICAgIC8qKlxyXG4gICAgICog5p6E6YCg5Ye95pWwXHJcbiAgICAgKiBAcGFyYW0ge2ludH0gbnVtIOWkp+Wwj1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihudW0pXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy5udW0gICAgPSBudW07XHJcbiAgICAgICAgdGhpcy5ib3JkZXIgPSB0aGlzLmluaXQobnVtKTtcclxuICAgICAgICAvLyB0aGlzLmJvcmRlciA9IGJvcmRlcjtcclxuICAgICAgICAvLyB0aGlzLndpZHRoICA9IHdpZHRoO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDliJ3lp4vljJbmlbDmja7nn6npmLUo5LqM57u05pWw57uEKVxyXG4gICAgICogQHBhcmFtIHtpbnR9IG51bSDliJ3lp4vljJZcclxuICAgICAqL1xyXG4gICAgaW5pdChudW0pXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGJvcmRlciA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBib3JkZXJbaV0gID0gW107XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDAgOyBqIDxudW0gOyBqKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJvcmRlcltpXVtqXSAgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBib3JkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpmo/mnLrnlJ/miJB0aW1lc+S4quaVsOWtl1xyXG4gICAgICogQHBhcmFtIGluc3QgdGltZXMg55Sf5oiQ5Liq5pWwXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZU51bSh0aW1lcylcclxuICAgIHtcclxuICAgICAgICAvLyDmo4Dmn6XmmK/lkKbov5jmnInnqbrkvZnnmoTmoLzlrZBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbWVzOyBpKyspIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrU3BhY2UoKSkgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vIGxldCByYW5kWSA9IDA7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOmaj+acunjkvY3nva5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmFuZFggPSBwYXJzZUludChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0aGlzLm51bSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCByYW5kWCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6ZqP5py6eeS9jee9rlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCByYW5kWSA9IHBhcnNlSW50KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMubnVtKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u6ZqP5py65YC8XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9yZGVyW3JhbmRYXVtyYW5kWV0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvcmRlcltyYW5kWF1bcmFuZFldID0gTWF0aC5yYW5kb20oKSA8IC41ID8gMiA6IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyByYW5kWSA9IDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcImdhbWUgb3ZlclwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog5qOA5p+l5piv5ZCm6L+Y5pyJ56m65L2Z56m66Ze0XHJcbiAgICAgKi9cclxuICAgIGNoZWNrU3BhY2UoKVxyXG4gICAge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJvcmRlci5ldmVyeShmdW5jdGlvbiAoaWFyciwgaSkge1xyXG4gICAgICAgICAgICByZXR1cm4gaWFyci5ldmVyeShmdW5jdGlvbiAobnVtLCBqKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIERvd24oKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBNYXRyaXggPSB0aGlzLmJvcmRlcjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdHJpeC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyDku47kuIrlkJHkuIvpgY3ljoYo5o6S6Zmk56ys5LiA5L2NKVxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gTWF0cml4W2ldLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gaiAtIDE7IGsgPj0gMDsgay0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtpXVtrXSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0cml4W2ldW2tdICE9IE1hdHJpeFtpXVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0cml4W2ldW2pdID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG4gPSBrIC0gMTsgbiA+PSAtMTsgbi0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yiw6L6+6L6555WMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFNYXRyaXhbaV0uaGFzT3duUHJvcGVydHkobikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2pdID0gTWF0cml4W2ldW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhbaV1ba10gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtpXVtuXSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0cml4W2ldW25dID09IE1hdHJpeFtpXVtrXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhbaV1bal0gPSBNYXRyaXhbaV1bbl0gKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhbaV1ba10gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhbaV1bbl0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtpXS5oYXNPd25Qcm9wZXJ0eShuKSAmJiBNYXRyaXhbaV1bbl0gIT0gTWF0cml4W2ldW2tdICYmIE1hdHJpeFtpXVtqXSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdHJpeFtpXVtqXSA9IE1hdHJpeFtpXVtrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2tdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtpXVtrXSA9PSBNYXRyaXhbaV1bal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2pdICs9IE1hdHJpeFtpXVtrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2tdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYm9yZGVyID0gTWF0cml4O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBVcCgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IE1hdHJpeCA9IHRoaXMuYm9yZGVyO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0cml4Lmxlbmd0aDsgaSsrKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIOS7juS4iuWQkeS4i+mBjeWOhlxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IE1hdHJpeFtpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IGogKyAxOyBrIDwgTWF0cml4W2ldLmxlbmd0aDsgaysrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRyaXhbaV1ba10gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtpXVtrXSAhPSBNYXRyaXhbaV1bal0pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRyaXhbaV1bal0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IGsgKyAxOyBuIDw9IE1hdHJpeFtpXS5sZW5ndGg7IG4rKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIsOi+vui+ueeVjFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTWF0cml4W2ldLmhhc093blByb3BlcnR5KG4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdHJpeFtpXVtqXSA9IE1hdHJpeFtpXVtrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2tdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRyaXhbaV1bbl0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtpXVtuXSA9PSBNYXRyaXhbaV1ba10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2pdID0gTWF0cml4W2ldW25dICogMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2tdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW25dID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRyaXhbaV0uaGFzT3duUHJvcGVydHkobikgJiYgTWF0cml4W2ldW25dICE9IE1hdHJpeFtpXVtrXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhbaV1bal0gPSBNYXRyaXhbaV1ba107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdHJpeFtpXVtrXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtpXVtqXSA9PSBNYXRyaXhbaV1ba10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2pdICs9IE1hdHJpeFtpXVtrXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2tdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJvcmRlciA9IE1hdHJpeDtcclxuICAgIH1cclxuXHJcbiAgICBMZWZ0KClcclxuICAgIHtcclxuICAgICAgICBsZXQgTWF0cml4ID0gdGhpcy5ib3JkZXI7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRyaXgubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgLy8g5LuO5LiK5ZCR5LiL6YGN5Y6GXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgTWF0cml4W2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gaSArIDE7IGsgPCBNYXRyaXgubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0cml4W2tdW2pdID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRyaXhba11bal0gIT0gTWF0cml4W2ldW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRyaXhbaV1bal0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbiA9IGsgKyAxOyBuIDw9IE1hdHJpeC5sZW5ndGg7IG4rKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIsOi+vui+ueeVjFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghTWF0cml4Lmhhc093blByb3BlcnR5KG4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdHJpeFtpXVtqXSA9IE1hdHJpeFtrXVtqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2tdW2pdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRyaXhbbl1baV0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtuXVtqXSA9PSBNYXRyaXhba11bal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2pdID0gTWF0cml4W25dW2pdICogMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2tdW2pdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W25dW2pdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRyaXguaGFzT3duUHJvcGVydHkobikgJiYgTWF0cml4W25dW2pdICE9IE1hdHJpeFtrXVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhbaV1bal0gPSBNYXRyaXhba11bal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdHJpeFtrXVtqXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtpXVtqXSA9PSBNYXRyaXhba11bal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2pdICs9IE1hdHJpeFtrXVtqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2tdW2pdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJvcmRlciA9IE1hdHJpeDtcclxuICAgIH1cclxuXHJcbiAgICBSaWdodCgpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IE1hdHJpeCA9IHRoaXMuYm9yZGVyO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBNYXRyaXgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgLy8g5LuO5LiK5ZCR5LiL6YGN5Y6GXHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgTWF0cml4W2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gaSAtIDE7IGsgPj0gMDsgay0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtrXVtqXSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0cml4W2tdW2pdICE9IE1hdHJpeFtpXVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0cml4W2ldW2pdID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG4gPSBrIC0gMTsgbiA+PSAtMTsgbi0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yiw6L6+6L6555WMXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFNYXRyaXguaGFzT3duUHJvcGVydHkobikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2ldW2pdID0gTWF0cml4W2tdW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhba11bal0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeFtuXVtpXSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0cml4W25dW2pdID09IE1hdHJpeFtrXVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhbaV1bal0gPSBNYXRyaXhbbl1bal0gKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhba11bal0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhbbl1bal0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdHJpeC5oYXNPd25Qcm9wZXJ0eShuKSAmJiBNYXRyaXhbbl1bal0gIT0gTWF0cml4W2tdW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdHJpeFtpXVtqXSA9IE1hdHJpeFtrXVtqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0cml4W2tdW2pdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoTWF0cml4W2ldW2pdID09IE1hdHJpeFtrXVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhbaV1bal0gKz0gTWF0cml4W2tdW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRyaXhba11bal0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYm9yZGVyID0gTWF0cml4O1xyXG4gICAgfVxyXG5cclxuICAgIFdpbigpXHJcbiAgICB7XHJcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uICgpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KHt9LCB0aGlzKVxyXG4gICAgICAgIH0gXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IG1heCA9IDA7XHJcbiAgICAgICAgdGhpcy5ib3JkZXIuZm9yRWFjaChmdW5jdGlvbiAoYXJyLCBpKSB7XHJcbiAgICAgICAgICAgIGlmIChhcnIubWF4KCkgPiBtYXgpIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtYXggPSBhcnIubWF4KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAobWF4ID49IDIwNDgpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYWxlcnQoJ3lvdSB3aW5kJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgZ2FtZUNvbnRyb2xsZXIiLCJjbGFzcyB2aWV3Q29udHJvbGxlclxyXG57XHJcbiAgICBjb25zdHJ1Y3Rvcih0YWcsd2lkdGgsbnVtKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuY29udGV4dCAgPSB0YWcuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICB0aGlzLm1hcmdpbiAgID0gMTA7XHJcbiAgICAgICAgdGhpcy53aWR0aCAgICA9IHdpZHRoO1xyXG4gICAgICAgIHRoaXMuaGVpZ2h0ICAgPSB3aWR0aDtcclxuICAgICAgICB0aGlzLmJveFdpZHRoID0gKHdpZHRoIC0gdGhpcy5tYXJnaW4gKiAobnVtICsgMSkpIC8gbnVtO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBiYWNrZ3JvdW5kKE1hdHJpeClcclxuICAgIHtcclxuICAgICAgICBsZXQgcG9zaXRpb25YID0gMDtcclxuICAgICAgICBsZXQgcG9zaXRpb25ZID0gMDtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMud2lkdGgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0cml4Lmxlbmd0aCA7IGkrKylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgTWF0cml4Lmxlbmd0aDsgaisrKSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb25YID0gKGkgKyAxKSAqIHRoaXMubWFyZ2luICsgaSAqIHRoaXMuYm94V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvblkgPSAoaiArIDEpICogdGhpcy5tYXJnaW4gKyBqICogdGhpcy5ib3hXaWR0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0JveChwb3NpdGlvblgsIHBvc2l0aW9uWSwgdGhpcy5zZXRDb2xvcihNYXRyaXhbaV1bal0pLCBNYXRyaXhbaV1bal0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgICBcclxuICAgIH1cclxuXHJcbiAgICBkcmF3Qm94KHgseSxjb2xvcj1cIiNmZmZcIixudW0pXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IHRoaXMuYm94V2lkdGggKiAwLjA3O1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0Lm1vdmVUbyh4LCB5KTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuYXJjVG8oeCArIHRoaXMuYm94V2lkdGgsIHksIHggKyB0aGlzLmJveFdpZHRoLCB5ICsgdGhpcy5ib3hXaWR0aCwgcmFkaXVzKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuYXJjVG8oeCArIHRoaXMuYm94V2lkdGgsIHkgKyB0aGlzLmJveFdpZHRoLCB4LCB5ICsgdGhpcy5ib3hXaWR0aCwgcmFkaXVzKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuYXJjVG8oeCwgeSArIHRoaXMuYm94V2lkdGgsIHgsIHksIHJhZGl1cyk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmFyY1RvKHgsIHksIHggKyB0aGlzLmJveFdpZHRoLCB5LCByYWRpdXMpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5maWxsKCk7XHJcbiAgICAgICAgaWYgKG51bSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IFwiI2ZmZlwiO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuZm9udCA9IFwiMjBweCBHZW9yZ2lhXCI7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsVGV4dChudW0sIHggKyB0aGlzLmJveFdpZHRoIC8gMiAtIDUsIHkgKyB0aGlzLmJveFdpZHRoIC8gMiArIDUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q29sb3IobnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHN3aXRjaCAobnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnIzk2Y2NjYyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcjNjBjY2NjJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJyM2MGZjY2MnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTY6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJyM2MGZjMDAnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJyNmZmYzMDAnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNjQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJyNmZmFiMDAnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTI4OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcjZmY4MTAwJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI1NjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnI2ZmNGIwMCc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA1MTI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJyNkNTFiMDAnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTAyNDpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnIzQ1MWIwMCc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyMDQ4OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcjMTUxYjAwJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gXCIjZmZmXCI7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgdmlld0NvbnRyb2xsZXIiLCJpbXBvcnQgZ2FtZUNvbnRyb2xsZXIgZnJvbSBcIi4vZ2FtZUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHZpZXdDb250cm9sbGVyIGZyb20gXCIuL3ZpZXdDb250cm9sbGVyXCI7XHJcbmxldCBnYW1lID0gbmV3IGdhbWVDb250cm9sbGVyKDQpO1xyXG5nYW1lLmNyZWF0ZU51bSgyKTtcclxubGV0IHRhZyAgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKTtcclxubGV0IHBhcmVudCAgICAgICA9IHRhZy5wYXJlbnROb2RlO1xyXG5sZXQgd2lkdGggICAgICAgID0gcGFyZW50LmNsaWVudFdpZHRoO1xyXG5sZXQgaGVpZ2h0ICAgICAgID0gcGFyZW50LmNsaWVudEhlaWdodDtcclxudGFnLndpZHRoICAgICAgICA9IHdpZHRoO1xyXG50YWcuaGVpZ2h0ICAgICAgID0gaGVpZ2h0O1xyXG5sZXQgdmlldyAgPSBuZXcgdmlld0NvbnRyb2xsZXIodGFnLHdpZHRoLGdhbWUubnVtKTtcclxudmlldy5iYWNrZ3JvdW5kKGdhbWUuYm9yZGVyKTtcclxuXHJcblxyXG4gICAgZG9jdW1lbnQub25rZXlkb3duID0gZnVuY3Rpb24gKGV2ZW50KSBcclxuICAgIHtcclxuICAgICAgICB2YXIgZSAgID0gZXZlbnQgfHwgd2luZG93LmV2ZW50IHx8IGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyLmFyZ3VtZW50c1swXTtcclxuICAgICAgICB2YXIga2V5ID0gZS5rZXlDb2RlO1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy8g5bemXHJcbiAgICAgICAgICAgIGNhc2UgMzc6XHJcbiAgICAgICAgICAgICAgICBnYW1lLkxlZnQoKTtcclxuICAgICAgICAgICAgICAgIHJlRHJhdygpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIC8vIOS4ilxyXG4gICAgICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICAgICAgZ2FtZS5VcCgpO1xyXG4gICAgICAgICAgICAgICAgcmVEcmF3KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgLy8g5Y+zXHJcbiAgICAgICAgICAgIGNhc2UgMzk6XHJcbiAgICAgICAgICAgICAgICBnYW1lLlJpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICByZURyYXcoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyDkuItcclxuICAgICAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgICAgIGdhbWUuRG93bigpO1xyXG4gICAgICAgICAgICAgICAgcmVEcmF3KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9OyBcclxuXHJcbmZ1bmN0aW9uIHJlRHJhdygpXHJcbntcclxuICAgIGdhbWUuY3JlYXRlTnVtKDEpO1xyXG4gICAgdmlldy5iYWNrZ3JvdW5kKGdhbWUuYm9yZGVyKTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);